---

- name: OS| Install base packages
  apt:
    name: "{{ base_packages | join(',') }}"
    state: present

- name: OS| Install python passlib
  pip:
    name: passlib

- name: OS| configure sshd
  template:
    src: templates/ssh/sshd_config
    dest: /etc/ssh/sshd_config
    mode: 0644
    owner: root
    group: root
  notify: restart sshd

- name: OS| configure rssh
  copy:
    src: files/rssh/rssh.conf
    dest: /etc/rssh.conf
    mode: 0644
    owner: root
    group: root

- name: OS| Add rssh to /etc/shells
  lineinfile:
    path: /etc/shells
    line: '/usr/bin/rssh'
    state: present

- name: OS| Create base directory
  file:
    path: "{{ base_path }}"
    state: directory
    mode: 0775
    owner: root
    group: root
